import { Component } from '@angular/core';
import { PoChartLineBaseComponent } from './po-chart-line-base.component';
import * as i0 from "@angular/core";
import * as i1 from "../../services/po-chart-maths.service";
import * as i2 from "@angular/common";
import * as i3 from "./po-chart-path/po-chart-path.component";
import * as i4 from "./po-chart-series-point/po-chart-series-point.component";
const _c0 = ["po-chart-line", ""];
function PoChartLineComponent__svg_g_2_Template(rf, ctx) { if (rf & 1) {
    const _r5 = i0.ɵɵgetCurrentView();
    i0.ɵɵnamespaceSVG();
    i0.ɵɵelementStart(0, "g", 2);
    i0.ɵɵlistener("mouseenter", function PoChartLineComponent__svg_g_2_Template__svg_g_mouseenter_0_listener() { const restoredCtx = i0.ɵɵrestoreView(_r5); const i_r3 = restoredCtx.index; const ctx_r4 = i0.ɵɵnextContext(); return ctx_r4.onEnter(i_r3); })("mouseleave", function PoChartLineComponent__svg_g_2_Template__svg_g_mouseleave_0_listener() { const restoredCtx = i0.ɵɵrestoreView(_r5); const i_r3 = restoredCtx.index; const ctx_r6 = i0.ɵɵnextContext(); return ctx_r6.onLeave(i_r3); });
    i0.ɵɵelement(1, "g", 3);
    i0.ɵɵelementStart(2, "g", 4);
    i0.ɵɵlistener("p-point-click", function PoChartLineComponent__svg_g_2_Template__svg_g_p_point_click_2_listener($event) { i0.ɵɵrestoreView(_r5); const ctx_r7 = i0.ɵɵnextContext(); return ctx_r7.onSeriePointClick($event); })("p-point-hover", function PoChartLineComponent__svg_g_2_Template__svg_g_p_point_hover_2_listener($event) { i0.ɵɵrestoreView(_r5); const ctx_r8 = i0.ɵɵnextContext(); return ctx_r8.onSeriePointHover($event); });
    i0.ɵɵelementEnd()();
} if (rf & 2) {
    const item_r2 = ctx.$implicit;
    const i_r3 = ctx.index;
    const ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵclassMap("po-chart-line-path-group-" + i_r3);
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("p-chart-line", ctx_r1.chartType === "line")("p-animate", ctx_r1.animate)("p-color", item_r2.color)("p-coordinates", item_r2 == null ? null : item_r2.coordinates)("p-is-active", item_r2.isActive);
    i0.ɵɵattribute("key", "po-chart-line-path-" + i_r3);
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("p-animate", ctx_r1.animate)("p-chart-line", ctx_r1.chartType === "line")("p-color", item_r2.color)("p-coordinates", ctx_r1.seriesPointsCoordinates[i_r3])("p-is-active", ctx_r1.activeTooltip)("p-relative-to", "po-chart-line-path-group-" + i_r3);
    i0.ɵɵattribute("key", "po-chart-line-path-points-group-" + i_r3);
} }
export class PoChartLineComponent extends PoChartLineBaseComponent {
    constructor(mathsService, renderer, elementRef) {
        super(mathsService, renderer, elementRef);
        this.mathsService = mathsService;
        this.renderer = renderer;
        this.elementRef = elementRef;
    }
    onEnter(serieIndex) {
        return null;
    }
    onLeave(serieIndex) {
        return null;
    }
    onSeriePointHover(selectedItem) {
        const { relativeTo, ...item } = selectedItem;
        this.reorderSVGGroup(relativeTo);
        this.pointHover.emit(item);
    }
    // É necessário reordenar os svgs on hover pois eventualmente os elemntos svg ficam por trás de outros. Não há z-index para svgElement.
    reorderSVGGroup(pathGroup) {
        const pathGroupElement = this.elementRef.nativeElement.querySelectorAll(`.${pathGroup}`);
        this.animate = false;
        this.renderer.appendChild(this.chartLine.nativeElement, pathGroupElement[0]);
    }
}
PoChartLineComponent.ɵfac = function PoChartLineComponent_Factory(t) { return new (t || PoChartLineComponent)(i0.ɵɵdirectiveInject(i1.PoChartMathsService), i0.ɵɵdirectiveInject(i0.Renderer2), i0.ɵɵdirectiveInject(i0.ElementRef)); };
PoChartLineComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: PoChartLineComponent, selectors: [["", "po-chart-line", ""]], features: [i0.ɵɵInheritDefinitionFeature], attrs: _c0, decls: 3, vars: 2, consts: [["chartLine", ""], [3, "class", "mouseenter", "mouseleave", 4, "ngFor", "ngForOf", "ngForTrackBy"], [3, "mouseenter", "mouseleave"], ["po-chart-path", "", 3, "p-chart-line", "p-animate", "p-color", "p-coordinates", "p-is-active"], ["po-chart-series-point", "", 3, "p-animate", "p-chart-line", "p-color", "p-coordinates", "p-is-active", "p-relative-to", "p-point-click", "p-point-hover"]], template: function PoChartLineComponent_Template(rf, ctx) { if (rf & 1) {
        i0.ɵɵnamespaceSVG();
        i0.ɵɵelementStart(0, "g", null, 0);
        i0.ɵɵtemplate(2, PoChartLineComponent__svg_g_2_Template, 3, 15, "g", 1);
        i0.ɵɵelementEnd();
    } if (rf & 2) {
        i0.ɵɵadvance(2);
        i0.ɵɵproperty("ngForOf", ctx.seriesPathsCoordinates)("ngForTrackBy", ctx.trackBy);
    } }, directives: [i2.NgForOf, i3.PoChartPathComponent, i4.PoChartSeriesPointComponent], encapsulation: 2 });
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && i0.ɵsetClassMetadata(PoChartLineComponent, [{
        type: Component,
        args: [{ selector: '[po-chart-line]', template: "<svg:g #chartLine>\n\n  <svg:g *ngFor=\"let item of seriesPathsCoordinates; let i = index; trackBy: trackBy\"\n    [class]=\"'po-chart-line-path-group-' + i\"\n    (mouseenter)=\"onEnter(i)\"\n    (mouseleave)=\"onLeave(i)\"\n  >\n    <!-- SERIES PATHS -->\n    <svg:g po-chart-path\n      [p-chart-line]=\"chartType === 'line'\"\n      [attr.key]=\"'po-chart-line-path-' + i\"\n      [p-animate]=\"animate\"\n      [p-color]=\"item.color\" \n      [p-coordinates]=\"item?.coordinates\"\n      [p-is-active]=\"item.isActive\"\n      >\n      </svg:g>\n\n    <!-- SERIES POINTS -->\n    <svg:g po-chart-series-point\n      [p-animate]=\"animate\"\n      [p-chart-line]=\"chartType === 'line'\"\n      [p-color]=\"item.color\"\n      [p-coordinates]=\"seriesPointsCoordinates[i]\"\n      [p-is-active]=\"activeTooltip\"\n      [p-relative-to]=\"'po-chart-line-path-group-' + i\" \n      [attr.key]=\"'po-chart-line-path-points-group-' + i\"\n      (p-point-click)=\"onSeriePointClick($event)\"\n      (p-point-hover)=\"onSeriePointHover($event)\"\n      ></svg:g>\n  </svg:g>\n\n</svg:g>" }]
    }], function () { return [{ type: i1.PoChartMathsService }, { type: i0.Renderer2 }, { type: i0.ElementRef }]; }, null); })();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8tY2hhcnQtbGluZS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy91aS9zcmMvbGliL2NvbXBvbmVudHMvcG8tY2hhcnQvcG8tY2hhcnQtY29udGFpbmVyL3BvLWNoYXJ0LWxpbmUvcG8tY2hhcnQtbGluZS5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy91aS9zcmMvbGliL2NvbXBvbmVudHMvcG8tY2hhcnQvcG8tY2hhcnQtY29udGFpbmVyL3BvLWNoYXJ0LWxpbmUvcG8tY2hhcnQtbGluZS5jb21wb25lbnQuc3ZnIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQXlCLE1BQU0sZUFBZSxDQUFDO0FBRWpFLE9BQU8sRUFBRSx3QkFBd0IsRUFBRSxNQUFNLGdDQUFnQyxDQUFDOzs7Ozs7Ozs7O0lDQXhFLDRCQUlDO0lBRkMsa09BQWMsb0JBQVUsSUFBQyxxTkFDWCxvQkFBVSxJQURDO0lBSXpCLHVCQVFVO0lBR1YsNEJBVUc7SUFGRCwwTEFBaUIsZ0NBQXlCLElBQUMsNktBQzFCLGdDQUF5QixJQURDO0lBRTFDLGlCQUFRLEVBQUE7Ozs7O0lBMUJYLGlEQUF5QztJQU12QyxlQUFxQztJQUFyQywwREFBcUMsNkJBQUEsMEJBQUEsK0RBQUEsaUNBQUE7SUFDckMsbURBQXNDO0lBVXRDLGVBQXFCO0lBQXJCLDBDQUFxQiw2Q0FBQSwwQkFBQSx1REFBQSxxQ0FBQSxxREFBQTtJQU1yQixnRUFBbUQ7O0FEakJ6RCxNQUFNLE9BQU8sb0JBQXFCLFNBQVEsd0JBQXdCO0lBQ2hFLFlBQ1ksWUFBaUMsRUFDakMsUUFBbUIsRUFDbkIsVUFBc0I7UUFFaEMsS0FBSyxDQUFDLFlBQVksRUFBRSxRQUFRLEVBQUUsVUFBVSxDQUFDLENBQUM7UUFKaEMsaUJBQVksR0FBWixZQUFZLENBQXFCO1FBQ2pDLGFBQVEsR0FBUixRQUFRLENBQVc7UUFDbkIsZUFBVSxHQUFWLFVBQVUsQ0FBWTtJQUdsQyxDQUFDO0lBRUQsT0FBTyxDQUFDLFVBQWtCO1FBQ3hCLE9BQU8sSUFBSSxDQUFDO0lBQ2QsQ0FBQztJQUNELE9BQU8sQ0FBQyxVQUFrQjtRQUN4QixPQUFPLElBQUksQ0FBQztJQUNkLENBQUM7SUFFRCxpQkFBaUIsQ0FBQyxZQUFpQjtRQUNqQyxNQUFNLEVBQUUsVUFBVSxFQUFFLEdBQUcsSUFBSSxFQUFFLEdBQUcsWUFBWSxDQUFDO1FBRTdDLElBQUksQ0FBQyxlQUFlLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDakMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDN0IsQ0FBQztJQUVELHVJQUF1STtJQUMvSCxlQUFlLENBQUMsU0FBaUI7UUFDdkMsTUFBTSxnQkFBZ0IsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLGFBQWEsQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLFNBQVMsRUFBRSxDQUFDLENBQUM7UUFFekYsSUFBSSxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUM7UUFDckIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxhQUFhLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUMvRSxDQUFDOzt3RkE3QlUsb0JBQW9CO3VFQUFwQixvQkFBb0I7UUNUakMsbUJBQWtCO1FBQWxCLGtDQUFrQjtRQUVoQix1RUE0QlE7UUFFVixpQkFBUTs7UUE5QmtCLGVBQTJCO1FBQTNCLG9EQUEyQiw2QkFBQTs7dUZET3hDLG9CQUFvQjtjQUpoQyxTQUFTOzJCQUNFLGlCQUFpQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgRWxlbWVudFJlZiwgUmVuZGVyZXIyIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbmltcG9ydCB7IFBvQ2hhcnRMaW5lQmFzZUNvbXBvbmVudCB9IGZyb20gJy4vcG8tY2hhcnQtbGluZS1iYXNlLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBQb0NoYXJ0TWF0aHNTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VydmljZXMvcG8tY2hhcnQtbWF0aHMuc2VydmljZSc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ1twby1jaGFydC1saW5lXScsXG4gIHRlbXBsYXRlVXJsOiAnLi9wby1jaGFydC1saW5lLmNvbXBvbmVudC5zdmcnXG59KVxuZXhwb3J0IGNsYXNzIFBvQ2hhcnRMaW5lQ29tcG9uZW50IGV4dGVuZHMgUG9DaGFydExpbmVCYXNlQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IoXG4gICAgcHJvdGVjdGVkIG1hdGhzU2VydmljZTogUG9DaGFydE1hdGhzU2VydmljZSxcbiAgICBwcm90ZWN0ZWQgcmVuZGVyZXI6IFJlbmRlcmVyMixcbiAgICBwcm90ZWN0ZWQgZWxlbWVudFJlZjogRWxlbWVudFJlZlxuICApIHtcbiAgICBzdXBlcihtYXRoc1NlcnZpY2UsIHJlbmRlcmVyLCBlbGVtZW50UmVmKTtcbiAgfVxuXG4gIG9uRW50ZXIoc2VyaWVJbmRleDogbnVtYmVyKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgb25MZWF2ZShzZXJpZUluZGV4OiBudW1iZXIpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIG9uU2VyaWVQb2ludEhvdmVyKHNlbGVjdGVkSXRlbTogYW55KSB7XG4gICAgY29uc3QgeyByZWxhdGl2ZVRvLCAuLi5pdGVtIH0gPSBzZWxlY3RlZEl0ZW07XG5cbiAgICB0aGlzLnJlb3JkZXJTVkdHcm91cChyZWxhdGl2ZVRvKTtcbiAgICB0aGlzLnBvaW50SG92ZXIuZW1pdChpdGVtKTtcbiAgfVxuXG4gIC8vIMOJIG5lY2Vzc8OhcmlvIHJlb3JkZW5hciBvcyBzdmdzIG9uIGhvdmVyIHBvaXMgZXZlbnR1YWxtZW50ZSBvcyBlbGVtbnRvcyBzdmcgZmljYW0gcG9yIHRyw6FzIGRlIG91dHJvcy4gTsOjbyBow6Egei1pbmRleCBwYXJhIHN2Z0VsZW1lbnQuXG4gIHByaXZhdGUgcmVvcmRlclNWR0dyb3VwKHBhdGhHcm91cDogc3RyaW5nKSB7XG4gICAgY29uc3QgcGF0aEdyb3VwRWxlbWVudCA9IHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYC4ke3BhdGhHcm91cH1gKTtcblxuICAgIHRoaXMuYW5pbWF0ZSA9IGZhbHNlO1xuICAgIHRoaXMucmVuZGVyZXIuYXBwZW5kQ2hpbGQodGhpcy5jaGFydExpbmUubmF0aXZlRWxlbWVudCwgcGF0aEdyb3VwRWxlbWVudFswXSk7XG4gIH1cbn1cbiIsIjxzdmc6ZyAjY2hhcnRMaW5lPlxuXG4gIDxzdmc6ZyAqbmdGb3I9XCJsZXQgaXRlbSBvZiBzZXJpZXNQYXRoc0Nvb3JkaW5hdGVzOyBsZXQgaSA9IGluZGV4OyB0cmFja0J5OiB0cmFja0J5XCJcbiAgICBbY2xhc3NdPVwiJ3BvLWNoYXJ0LWxpbmUtcGF0aC1ncm91cC0nICsgaVwiXG4gICAgKG1vdXNlZW50ZXIpPVwib25FbnRlcihpKVwiXG4gICAgKG1vdXNlbGVhdmUpPVwib25MZWF2ZShpKVwiXG4gID5cbiAgICA8IS0tIFNFUklFUyBQQVRIUyAtLT5cbiAgICA8c3ZnOmcgcG8tY2hhcnQtcGF0aFxuICAgICAgW3AtY2hhcnQtbGluZV09XCJjaGFydFR5cGUgPT09ICdsaW5lJ1wiXG4gICAgICBbYXR0ci5rZXldPVwiJ3BvLWNoYXJ0LWxpbmUtcGF0aC0nICsgaVwiXG4gICAgICBbcC1hbmltYXRlXT1cImFuaW1hdGVcIlxuICAgICAgW3AtY29sb3JdPVwiaXRlbS5jb2xvclwiIFxuICAgICAgW3AtY29vcmRpbmF0ZXNdPVwiaXRlbT8uY29vcmRpbmF0ZXNcIlxuICAgICAgW3AtaXMtYWN0aXZlXT1cIml0ZW0uaXNBY3RpdmVcIlxuICAgICAgPlxuICAgICAgPC9zdmc6Zz5cblxuICAgIDwhLS0gU0VSSUVTIFBPSU5UUyAtLT5cbiAgICA8c3ZnOmcgcG8tY2hhcnQtc2VyaWVzLXBvaW50XG4gICAgICBbcC1hbmltYXRlXT1cImFuaW1hdGVcIlxuICAgICAgW3AtY2hhcnQtbGluZV09XCJjaGFydFR5cGUgPT09ICdsaW5lJ1wiXG4gICAgICBbcC1jb2xvcl09XCJpdGVtLmNvbG9yXCJcbiAgICAgIFtwLWNvb3JkaW5hdGVzXT1cInNlcmllc1BvaW50c0Nvb3JkaW5hdGVzW2ldXCJcbiAgICAgIFtwLWlzLWFjdGl2ZV09XCJhY3RpdmVUb29sdGlwXCJcbiAgICAgIFtwLXJlbGF0aXZlLXRvXT1cIidwby1jaGFydC1saW5lLXBhdGgtZ3JvdXAtJyArIGlcIiBcbiAgICAgIFthdHRyLmtleV09XCIncG8tY2hhcnQtbGluZS1wYXRoLXBvaW50cy1ncm91cC0nICsgaVwiXG4gICAgICAocC1wb2ludC1jbGljayk9XCJvblNlcmllUG9pbnRDbGljaygkZXZlbnQpXCJcbiAgICAgIChwLXBvaW50LWhvdmVyKT1cIm9uU2VyaWVQb2ludEhvdmVyKCRldmVudClcIlxuICAgICAgPjwvc3ZnOmc+XG4gIDwvc3ZnOmc+XG5cbjwvc3ZnOmc+Il19